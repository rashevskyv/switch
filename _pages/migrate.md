---
title: "Переход с SXOS на Atmosphere"
permalink: migrate
---

{% spoiler Зачем переходить на Atmosphere? %}

В октябре 2020 года [были арестованы два лидера Xecuter Team](https://www.theverge.com/2020/10/2/21499297/team-xecuter-selling-nintendo-hacks-arrested-charged-fraud){:target="_blank"} - кампании, занимавшейся разработкой и поддержкой SXOS, а так же производством чипов для модификации приставок с закрытой уязвимостью. 

1-го декабря 2020 года в свет выходит обновление системного ПО Switch под версией 11.0.0 и уже спустя 5 дней команда SXOS выпустила прошивку с поддержкой этого обновления. Казалось бы, всё идёт хорошо и несмотря на аресты, TX всё ещё работают. 

Однако, примерно в это же время, все китайские площадки, продававшие чипы в один голос начали говорить о том, что чипы у них закончились и перспективы производства новых партий весьма призрачны. Так же начали распространяться слухи о том, что все производственные фабрики чипов закрыты, а продукция конфискована. Штат сотрудников разогнан, а запрет на продажу чипов пущен чуть ли не из верхушки коммунистической партии Китая. Во что не так уж и сложно поверить, если вспомнить, что мощнейшая корпорация Tencent является официальным дистрибутором продукции Nintendo в Китае. 

Последней же каплей, подтверждающей, что злые языки, вероятно, правы, стал выход прошивки 11.0.1, которая на момент написания этой заметки до сих пор не работает на SXOS. 

Стоит отметить, что 11.0.1 обновление минорное и Atmosphere буквально к вечеру того же дня уже с ним работала. 

В начале 2021 года вышла Atmosphere 0.17.0, которая уже полностью поддерживала работу на чипованных приставках, так что теперь можно уже и не ждать новых версий SXOS - это просто уже не нужно. 

{% endspoiler %}

## Переход из SX на Atmosphere

{% spoiler Видеоинструкция %}

{% include youtube.html id="iHkkzY44IiA" %}
{: .text-center}
{: .notice--info}

{% endspoiler %}

Выберите вариант, который вам подходит и следуйте инструкции. 

{% spoiler Прошиваемая приставка с уязвимостью Fusée Gelée или прошитая с помощью Caffeine  %}

1. Вставьте карту памяти приставки в ПК 
1. Установите {% include abbr/kefir_addr.txt %}
1. Дождитесь окончания установки, затем верните карту памяти в консоль
1. Включите консоль 
1. **Если у вас был EmuNAND** (если не было, то не надо ничего делать!), на заставке кефира **нажмите кнопку понижения громкости**, чтобы попасть в hekate 	
	1. Перейдите в "**emuMMC**"
	1. Нажмите "**Migrate emuMMC**"
	1. Выберите "**Emunand**" -> "**Continue**"
	1. После окончания миграции, нажмите "**Change emuMMC**" и в правой части экрана выберите "**emuMMC/EF00**" (вместо EF могут быть другие буквы)
	1. Нажмите "**ОК**"
		* Теперь при запуске приставки она автоматически будет запускать emuMMC. 
		* Чтобы попасть в официальную прошивку, запустите **hekate -> Launch -> Stock**

{% endspoiler %}

{% spoiler Непрошиваемая приставка с чипом от Team Xecuter (SX Core или SX Lite) %}

{% spoiler Подготовительные работы %}

Пока мы не начали переход, нужно убедиться, что на SysNAND и EmuNAND работают на последней версии системного ПО. Иначе при переносе EmuNAND в Atmosphere вы не сможете его запустить. 

#### Резервное копирование сохранений

1. Выполните резервное копирование сохранений по [этой инструкции](backup-saves.html){:target="_blank"}

#### Обновление EmuNAND до {% include /vars/update_version.txt %}

1. Обновите EmuNAND до {% include /vars/update_version.txt %} по [этой инструкции](http://sx.customfw.xyz/update-to-latest){:target="_blank"}

{% endspoiler %}

{% spoiler Запуск прошивки %}

1. Вставьте карту памяти приставки в ПК 
1. Установите {% include abbr/kefir_addr.txt %}
1. Дождитесь окончания установки, затем верните карту памяти в консоль
1. Включите консоль 
	* Должен загрузиться SysNAND. 
	* Если возникают какие-либо ошибки, обратитесь к разделу "[**Проблемы и их решения**](migrate#проблемы-и-их-решения)" внизу этой страницы

{% endspoiler %}

{% spoiler Перенос EmuNAND с SX OS в Atmosphere %}

Если EmuNAND нет, то переходите под следующий спойлер и делайте его. 
{: .notice--warning}

1. Выключите консоль
1. Включите консоль, удерживая кнопку понижения громкости, чтобы загрузиться в hekate
1. Перейдите в "**emuMMC**"
1. Нажмите "**Migrate emuMMC**"
1. Выберите "**Emunand** -> "**Continue**"
1. После окончания миграции, нажмите "**Change emuMMC**" и в правой части экрана выберите "**emuMMC/EF00**" (вместо EF могут быть другие буквы)
1. Нажмите "**ОК**"
1. Вставьте карту памяти приставки в ПК 
1. Скачайте архив [`erista.zip`](files/erista.zip){:target="_blank"} или [`mariko.zip`](files/mariko.zip){:target="_blank"} в зависимости от ревизии вашей приставки
	* Если ваш серийник начинается на **XK**, то у вас **Mariko**. В остальных случаях - **Erista** (**XAW, XAJ, XAK итп.**)
		* Серийный номер приставки находится в **Системных настройках =- Система =- Серийные номера**, самый первый серийник. Он же находится рядом с разъемом для зарядки на нижней грани планшета. 
	* Switch Lite всегда Mariko 
1. Скопируйте `BOOT0` и `BOO1` из архива [`erista.zip`](files/erista.zip){:target="_blank"} или [`mariko.zip`](files/mariko.zip){:target="_blank"} в папку `emuMMC\ED00\eMMC` с заменой
	* Вместо `ED00` в пути может быть как `SD01` так и любые другие сочетания из двух букв и двух чисел
	* Теперь при запуске приставки она автоматически будет запускать emuMMC. 
	* Чтобы попасть в официальную прошивку, запустите **hekate** -> "**Launch**" -> "**Stock**"

{% endspoiler %}

{% spoiler Создание EmuNAND через hekate %}

Если у вас не было EmuNAND, крайне рекомендуется его создать. Это делается в первую очередь для того, чтобы избежать неприятных последствий для SysNAND в случае каких-либо косяков, так что сделайте EmuNAND даже если вы не планируете пользоваться лицензией или онлайном!
{: .notice--warning}

1. Выключите консоль
1. Включите консоль, удерживая кнопку понижения громкости, чтобы загрузиться в hekate
1. Перейдите в "**emuMMC**"
1. Нажмите "**Create emuMMC**" -> "**SD File**"
	* Для создания emuMMC нужно иметь не менее 32Гб свободного места на карте! Если у вас нет столько, возьмите другую карту, либо временно перенесите папку Nintendo на ваш ПК
1. После окончания создания emuMMC, нажмите "**ОК**"
	* Теперь при запуске приставки она автоматически будет запускать emuMMC. 
	* Чтобы попасть в официальную прошивку, запустите **hekate** -> "**Launch**" -> "**Stock**"

{% endspoiler %}

{% spoiler Бекап прошивки и ключей %}

Пропустите, если у вас уже есть бекап прошивки и ключей.
{: .notice--warning}

1. Выключите консоль
1. Вставьте карту памяти приставки в ПК 
1. Скопируйте папку `emuMMC/eMMC` из корня вашей карты памяти на ПК. Это ваш эмунанд. Он идентичен бекапу, поэтому нет никакого смысла создавать бекап отдельно 
1. Сделайте бекап ключей, согласно [этой инструкции](backup-nand#часть-ii---дампим-ключи){:target="_blank"}
1. Перейдите в папку `sd:/switch` и скопируйте файлы `prod.keys` и `partialaes.keys` в ту же папку, в которую вы скопировали ваш бекап

Поместите бекап в надежное место, желательно в несколько разных. И в облако. И на флешку какую-либо. Не потеряйте его!
{: .notice--danger}

{% endspoiler %}

{% endspoiler %}

## Проблемы и их решения

{% spoiler Черный экран при запуске SysNAND %}

1. Выключите приставку, удерживая 30 секунд кнопку питания 
1. Вставьте карту памяти приставки в ПК 
1. Скачайте [SX_OS 3.1.0](https://drive.google.com/file/d/1PZ7w1J5PAQf4CrUWfzfA1mVnCNeD13RP){:target="_blank"}
1. Поместите скачанный `boot.dat` в корень карты памяти с заменой
1. Включите консоль, удерживая кнопку повышения громкости, чтобы попасть в меню загрузчика SX OS
1. Перейдите в "**Options**" -> "**SX Core** / **SX Lite**", затем выберите "**Cleanup**" -> "**Continue**"
7. Перейдите в "**Payloads**" -> `payload.bin`”`, затем выберите "**Launch**". Должен загрузиться SysNAND.

Теперь установите {% include abbr/kefir_addr.txt %} ещё раз. Последующие запуски kefir будет запускаться автоматически сразу при включении приставки.
{: .notice--info}

{% endspoiler %}

{% spoiler Черный экран при запуске EmuNAND / Ошибки при запуске EmuNAND, связанные с boot %}

Сперва попробуйте запустить SysNAND и выполняйте нижеследующую инструкцию только если SysNAND запускается! Если нет, сперва решите эту проблему, а затем вернитесь к выполнению этой инструкции!
{: .notice--warning}

1. Включите консоль 
1. На заставке кефира **нажмите кнопку понижения громкости**, чтобы попасть в hekate 
1. Перейдите в "**Tools**"	 -> "**Backup eMMC**" -> "**eMMC BOOT0 & BOOT1**"
1. Нажмите "**Close**", "**Close**", перейдите в "**Home**" и нажмите "**Power Off**", подтвердите выключение
1. Вставьте карту памяти приставки в ПК 
1. Перейдите в папку `sd:\backup\%emmc_id%`, где **%emmc_id%** - уникальный номер для каждой отдельной приставки.
1. Скопируйте `BOOT0` и `BOO1` из этой папки в папку `emuMMC\ED00\eMMC` с заменой
1. Пробуйте запустить эмунанд. Если не вышло, вам придется создавать новый. 

{% endspoiler %}

{% spoiler Ошибка "Pkg1 decryption failed! Is BEK Missing?" %}

Обновите {% include abbr/kefir_addr.txt %}!

{% endspoiler %}

{% spoiler У меня другая ошибка %}

Расскажите об этом в [группе](http://vk.customfw.xyz). **Обязательно** приложите скриншот ошибки, версию своей приставки (если не знаете какая - серийник), как запускается прошивка (чип (если да, то какой), донгл (если да, то какой), ещё как-то), версию системного ПО, наличие EmuNAND, что именно выдает ошибку - EmuNAND или SysNAND, версию кефира, после чего возникает ошибка. 
Отсутствие **любого** из этих пунктов приведет к тому, что ваш пост удалят или проигнорируют. 

{% endspoiler %}

{% spoiler Не могу запустить HBL %}

В Atmosphere HBL запускается, удерживая (R) при запуске альбомов. Подробнее - [Homebrew Launcher](hbl){:target="_blank"}

{% endspoiler %}