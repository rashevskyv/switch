---
lang: uk
permalink: /uk/backup-nand.html
title: Резервне копіювання NAND
author_profile: true
---

{% include toc title="Розділи" %}
{% include notices %}	

**Суворо не рекомендується пропускати цей крок!** Якщо у вас вже є бекап, повторно його робити не обов'язково. Однак, переконайтеся, що ваш бекап повний (RAW, BOOT0\1, ключі)
{: .notice--danger}

Бекап і ключі у кожної консолі унікальні! Ви не зможете відновити консоль, використовуючи бекап іншої приставки. Більш того, після відновлення чужого бекапу ви отримаєте брик, який відновити вдасться, тільки наклавши власний бекап. Підходьте до цього питання відповідально.
{: .notice--warning}

## Що знадобиться

* Встановлений свіжий {% include abbr/uk/kefir_addr.txt %}
* Працююча microSD, з не менш ніж 32 Гб вільного місця, для OLED - 64Гб, у форматі FAT32
	* Обов'язково [перевірте вашу карту](http://customfw.xyz/test_sd) перед тим, як робити бекап!
* [Відформатуйте вашу карту пам'яті в FAT32](https://format.customfw.xyz){:target="_blank"}
    * Так, саме в FAT32. Ні, проблем з іграми більше 4Гб не буде
    * Робіть це навіть у тому випадку, якщо ваша карта пам'яті не містить даних
    * Робіть саме за цією інструкцією
	 * Зробіть це ще раз, навіть якщо ваша картка вже в FAT32 

## Створення резервної копії

### Частина I - Дампимо ключі

1. Встановіть {% include abbr/uk/kefir_addr.txt %} за інструкцією, що знаходиться в його репозиторії
    * Якщо вже робили, не потрібно робити повторно
{% include inc/uk/launch-hekate.txt %}
1. Перейдіть в меню "**Payloads**"
1. Виберіть "**Lockpick_RCM.bin**"
1. Виберіть "**Dump keys from SysNAND**"
    * Навігація по меню здійснюється кнопками гучності, а вибір кнопкою {% include inc/uk/btn.txt btn="POWER" %}
	* Дампінг почнеться негайно
1. Натисніть {% include inc/uk/btn.txt btn="POWER" %}, щоб повернутися в головне меню програми
1. Виберіть "**Reboot to hekate**", щоб завантажитися в прошивку

### Частина II - Резервне копіювання NAND

{% spoiler Спосіб I - За допомогою hekate (рекомендовано) %}

{% spoiler Частина I - робимо дамп внутрішньої пам'яті приставки (NAND) %}

Цей спосіб вимагає карти пам'яті з не менш ніж 32-ма Гб вільного місця, якщо OLED - 64Гб. Якщо у вас немає такої, але є карта меншого розміру, бекап робитиметься частинами. Після заповнення поточного обсягу на карті на екрані буде виведена інформація про те, що вам необхідно перенести папку backup на ПК, потім повернути карту в консоль і продовжити створення резервної копії.
{: .notice--info}

1. Оновіть {% include abbr/uk/kefir_addr.txt %} за інструкцією з репозиторію, якщо не робили цього раніше
{% include inc/uk/launch-hekate.txt %}
1. Перейдіть в меню "**Tools**" -> "**Backup eMMC**"
1. Виберіть "**eMMC RAW GPP**"
	* Дочекайтеся закінчення резервного копіювання
	* Резервне копіювання займає близько 20 хвилин, залежно від швидкості карти пам'яті
1. Натисніть кнопку "**Close**", щоб повернутися в попереднє меню

Якщо ви робили резервне копіювання NAND на **новій** приставці, в NAND якої ще не встановлювали ігор, то архівування резервної копії дасть якісний результат. Цього результату не буде, якщо приставка вживана і сброшена до заводських налаштувань.
{: .notice--info}

{% endspoiler %}

{% spoiler Частина II - робимо дамп завантажувальних розділів (BOOT0/BOOT1) %}

{% include inc/uk/launch-hekate.txt %}
1. Перейдіть в меню "**Tools**" -> "**Backup eMMC**"
1. Виберіть "**eMMC BOOT0 & BOOT1**"
1. Натисніть кнопку "**Close**", щоб повернутися в попереднє меню

{% endspoiler %}

{% endspoiler %}

{% spoiler Спосіб II - За допомогою ПК %}

### Дамп NAND

Цей спосіб складніший, ніж попередній, але не вимагає наявності великої карти пам'яті. Швидкість створення резервної копії таким способом буде не більше 6МБ/с
{: .notice--info}

1. Вимкніть консоль
1. Вставте карту пам'яті приставки в ПК
{% include inc/uk/launch-hekate.txt %}
1. Перейдіть в меню "**Tools**" -> "**USB Tools**"
1. Під'єднайте консоль до ПК
1. Натисніть "**eMMC RAW GPP**"

	**УВАГА!!!** Якщо ви в процесі виконання посібника побачите діалогове вікно з пропозицією відформатувати диск - **натисніть скасувати**!!
	{: .notice--danger}
	
	![]((/assets/images/switch/screenshots/format.png) 
	{: .text-center}
	{: .notice--danger}
	
	![]((/assets/images/switch/screenshots/format_mac.png)
	{: .text-center}
	{: .notice--danger}
	
**Виберіть вашу операційну систему:**

{% spoiler Windows %}
	
1. Запустіть [HDD Raw Copy Tool](http://hddguru.com/software/HDD-Raw-Copy-Tool/HDDRawCopy1.10Portable.exe){:target="_blank"} від імені адміністратора
1. Виберіть "**hekate eMMC GPP**" і натисніть "**Continue**"
	* Якщо такого пристрою немає, переконайтесь що підключили консоль якісним кабелем к робочому порту
1. Двічі клікніть на написі "**Double-click to open file**" і збережіть бекап з ім'ям `rawnand`
    * Зверніть увагу на рядок "**Тип файлу**", переконайтеся, що там встановлено **Raw image**
1. Натисніть "**Continue**"
1. Натисніть "**START**", щоб почати резервне копіювання
1. Якщо все пройшло успішно, то дамп NAND з'явиться в директорії, яку ви вказали. Збережіть його в надійному місці!
1. Від'єднайте пристрій **UMS** безпечно через трей операційної системи, або видаліть його через панель керування 
{% endspoiler %}

{% spoiler macOS %}

1. Запустіть програму Дискова утиліта, переконайтеся, що там з'явився зовнішній диск з назвою "**hekate eMMC GPP**"
1. В Дисковій утиліті натисніть правою кнопкою миші на пункті "Linux UMS disk 0 Media"
1. Виберіть опцію "Образ з Linux UMS disk 0 Media" і вкажіть шлях, куди зберегти отриманий файл
	* Процес займе якийсь час. 
	* Якщо ви хочете відновити бекап на ваш пристрій, то виберіть опцію "Відновити...", а у вікні, що з'явилося, натисніть кнопку "Образ..." і вкажіть шлях до збереженого файлу.
1. Якщо все пройшло успішно, то дамп NAND з'явиться в директорії, яку ви вказали. Збережіть його в надійному місці!

{% endspoiler %}

### Дамп BOOT0/BOOT1

Робіть аналогічним способом, як робили **Дамп NAND**, але замість "**eMMC RAW GPP**" оберіть "**BOOT0**" та "**BOOT1**" по черзі і збережіть їх під відповідними іменами

{% endspoiler %}

### Частина III - Копіювання резервної копії на ПК	

{% spoiler Інструкція %}
Якщо ви збираєтеся робити EmuNAND, то саме копіюйте файли, а не переміщуйте, оскільки далі ми зможемо зробити з цього бекапу EmuNAND
{: .notice--warning}

1. Вставте карту пам'яті консолі в ПК 
1. Перейдіть у папку `sd:/switch` і скопіюйте файли `prod.keys` в ту ж папку, в яку плануєте зберігати бекап
	* Файлу `partialaes.keys` може не бути. Це нормально
1. Скопіюйте на ПК папку `backup` 
1. Заархівуйте папку `backup` і помістіть в надійне місце
1. Якщо ви не збираєтеся робити EmuNAND, видаліть папку `backup` з карти пам'яті. Відповідно, залиште папку, якщо збираєтесь робити емунанд.

В загальному випадку, бекап повинен виглядати приблизно так: <br><br>

![]((/assets/images/switch/screenshots/backup.png) 
{: .text-center}

Бекап, зроблений на Switch OLED, містить вдвічі більше файлів, оскільки має вдвічі більше внутрішньої пам'яті - 64Гб
{: .notice--info}

Після першого запуску консолі в прошивку, атмосфера автоматично створить бекап ще двох важливих файлів, вони будуть знаходитися в папці `atmosphere/automatic_backups`. Також перенесіть цю папку в надійне місце. Маючи на руках ці файли і ключі, ви зможете відновити вашу приставку навіть не маючи бекапу NAND (але це не означає, що його не потрібно берегти)
{: .notice--danger}

{% endspoiler %}
	
## Відновлення резервної копії

Ніколи не відновлюйте чужий бекап на свою консоль! Відновивши чужий бекап, ви отримаєте брик. Якщо у вас при цьому немає власного бекапу, то брик буде невідновний простими способами.
{: .notice--danger}

{% spoiler Спосіб I - Відновлення через hekate %}

1. На ПК перейдіть у папку зі своїми резервними копіями 
1. В папці `backup -> ID` створіть папку `restore` і перемістіть вміст папки `ID` в папку `restore`
	* ID - код з 8-ми символів від "0" до "9" і від "a" до "f"
	* Якщо папок немає, наприклад через те, що резервну копію робили через ПК, просто зробіть бекап чогось невеликого (BOOT1, наприклад) в гекаті і папка з'явиться
	* В підсумку все повинно виглядати приблизно так: `/backup/ID/restore` <br><br>
	
	![]((/assets/images/switch/screenshots/restore.png) 
	{: .text-center}
	{: .notice--info}	
1. Перемістіть папку `backup` в корінь карти пам'яті вашої консолі
{% include inc/uk/launch-hekate.txt %}
1. Перейдіть в "**Tools**" -> "**Restore**" і виберіть "**Restore eMMC"**
1. Виберіть "**eMMC BOOT0 & BOOT1**" для відновлення BOOT0 і BOOT1
1. Виберіть "**eMMC RAW GPP**" для відновлення RAW розділу
1. Для підтвердження натисніть {% include inc/uk/btn.txt btn="POWER" %}
1. Не забудьте видалити з карти пам'яті папку `backup` після закінчення відновлення і перевірки працездатності консолі після відновлення

{% endspoiler %}

{% spoiler Спосіб II - Відновлення через ПК %}

Цей спосіб працює тільки на приставках першої ревізії - {% include abbr/uk/erista.md %}
{: .notice--warning}

Відновлення проводиться рівно через ті ж самі програми, що і робилася резервна копія, за винятком того, що ви спершу вибираєте файл резервної копії, а потім диск, на який вона буде відновлюватися. Зверніть увагу, що відновлювати потрібно і RAWNAND, і BOOT0, BOOT1!

При проблемах з відновленням або відсутності бекапу можете спробувати [цю інструкцію](/uk/downgrade_fw){:target="_blank"}

{% endspoiler %}

{% spoiler Вирішення проблем %}

* **П:** Приставка не запускається після відновлення бекапу 
	* **В:** Спробуйте [цей метод](/uk/downgrade_fw){:target="_blank"} для відновлення та підвищення версії прошивки

* **П:** Я втратив бекап, або бекап не відновлюється
	* **В:** Спробуйте [цей метод](/uk/downgrade_fw){:target="_blank"} для відновлення та підвищення версії прошивки. Якщо не допомогло, спробуйте [вручну, з видаленням всіх даних](/uk/downgrade_fw_manual){:target="_blank"}

* **П:** Чи можна відновити приставку не маючи бекапа на нову плату NAND?  
	* **В:** Так, [спробуйте цей метод](https://www.sthetix.info/the-level-2-unbrick-guide-with-a-new-method/){:target="_blank"}

* **П:** Я не маю бекап, але маю робочий emuNAND
	* **В:** Можете відновити його замість бекапа за [цією інструкцією](https://www.sthetix.info/unbricking-the-nx-console-flashing-the-emummc-to-the-sysmmc/){:target="_blank"}. Якщо ваш emuNAND зменьшиний, спочатку [розширте його](https://www.sthetix.info/unbricking-the-nx-console-flashing-the-emummc-to-the-sysmmc/){:target="_blank"}

{% endspoiler %}

___

[Закрити сторінку](javascript:window.close();)
{: .notice--success}