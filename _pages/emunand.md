---
permalink: /emunand.html
title: Установка EmuNAND
author_profile: true
---
{% include toc title="Разделы" %}
Для уже прошитых пользователей, которые хотят восстановить возможность играть онлайн на уже прошитой приставке, а пиратить исключительно в EmuNAND есть отдельная инструкция - [Переход на EmuNAND для уже прошитых](preparation-white){: target="blank_"}
{: .notice--info}

## Что нужно знать про EmuNAND

{% spoiler Что такое EmuNAND %}

{% spoiler Видео %}

{% include youtube_clean.html id="YOULKSu4-Ds" %}
{: .text-center}
{: .notice--info}

{% endspoiler %}

**EmuNAND** - это копия системной прошивки, расположенная на карте памяти, из которой загружается система. Как правило, EmuNAND используется не один, а в связке с SysNAND. Обычно SysNAND используют для игры онлайн в купленные или официально скачанные из eShop игры. Если не запускать на SysNAND пиратку, то шанс, что его забанят крайне невысок. EmuNAND же наоборот, используют как раз для запуска пиратки. В нём специальным образом удаляют серийный номер приставки, так что даже при работающем интернет-подключении, Nintendo не может отследить что на приставке было запущено неавторизированное ПО. 
{% endspoiler %}

{% spoiler Зачем нам EmuNAND %}

### EmuNAND вам может понадобиться если...

* вы хотите играть онлайн в купленные\бесплатные игры.  В таком случае вы будете загружаться в EmuNAND для игры в пиратку, а {% include abbr/sysnand.txt abbr="SysNAND" %} использовать исключительно для игры в лицензию. В этом случае шанс бана существенно ниже.
* вы используете {% include abbr/caffeine.txt abbr="Caffeine" %}. В таком случае у вас нет выбора и единственный способ прошить приставку - использовать EmuNAND 
* ваша приставка второй ревизии. В таком случае EmuNAND используется исключительно для того, чтобы не поломать себе консоль. Используйте EmuNAND для вашей же безопасности!

В иных случаях EmuNAND не обязателен. То есть, если вы собираетесь просто играть в пиратку и вам не интересен онлайн, то от EmuNAND пользы не будет. 

Если вы очень хотите играть онлайн, но вас уже забанили, то EmuNAND вам не поможет. 
{: .notice--info}

{% endspoiler %}

{% spoiler Можно ли работать без EmuNAND %}
Да, вполне. Если вам не нужен онлайн на приставке, взламываемой через Fusée Gelée, EmuNAND вам не понадобится. 
{% endspoiler %}

{% spoiler Сколько EmuNAND занимает места %}
Как правило, размер EmuNAND равен размеру внутренней памяти приставки, то есть 32Гб. Однако, ниже, мы сможем его уменьшить до 10Гб. Так же имейте ввиду, что вы не сможете использовать внутреннюю память вашей приставки для установки игр, поскольку в качестве внутренней памяти будет выступать сам EmuNAND. Да и в целом, не рекомендуется устанавливать игры во внутреннюю память при работе с EmuNAND на Atmosphere. 
То есть, на вашей карте памяти будет занято около 10Гб свободного места под эмунанд и вы не сможете использовать его для установки игр. 32Гб памяти самого свитча так же использовать не получится. То есть, для установки игр вам будет доступна только ваша карта памяти, минус 10Гб эмунанда. 
{% endspoiler %}

{% spoiler Плюсы и минусы использования EmuNAND %}

* Плюсы
    * **Полная изоляция от основной системы** - эмунандщ находится в полностью изолированной среде, потому действия в нём никак не влияют на основную систему. У него отдельные игры, отдельные сохранения, отдельные логи. Если вы испортите EmuNAND это никак не повлияет на основную систему и приставка продолжит работать. 
    * **Безопасный онлайн** - следствие предыдущего пункта. Благодаря тому, что эмунанд изолирован, вы можете смело пользоваться стоковой прошивкой с минимальными рисками быть забаненным. 
    * **Простота резервного копирования** - так как эмунанд находится на карте, его можно просто периодически копировать на ПК для резервного копирования. 

* Минусы
    * **Занимает место не карте памяти** - размер EmuNAND создаётся равным размеру внутренней памяти приставки, потому размер вашей карты памяти будет на 32Гб меньше изначального.
    * **Не даёт устанавливать игры во внутреннюю память приставки** - для установки игр будет доступна только карта памяти. 
    * **Игры, установленные во внутреннюю память EmuNAND могут глючить** - возможно, со временем эта проблема будет решена в самой Atmosphere, мы же в гайде решим её по своему, создав EmuNAND на карте памяти всего лишь в 10Гб размером, таким образом размер внутренней памяти будет достаточен лишь для того, чтобы хранить данные самой консоли и пользовательские сохранения, а все игры будут устанавливаться на карту памяти.

{% endspoiler %}

{% spoiler Как перенести EmuNAND на другую карту %}
Если EmuNAND сделан на отдельном разделе, то следует воспользоваться программой [EmuTool](https://gbatemp.net/threads/emutool-move-partition-emu-on-another-sd-switch-emu-type-on-sxos-and-more.550756/){: target="blank_"}. Если же EmuNAND создан в виде файлов (именно такой создаётся в процессе выполнения этого руководства), то он переносится простым копированием
{% endspoiler %}

{% spoiler Как сделать резервную копию EmuNAND на ПК %}
Для создания резервной копии EmuNAND достаточно просто скопировать на ПК папку `emuMMC/SD00/eMMC` (вместо `SD00` может быть другое название)
{% endspoiler %}

{% include inc/sysnand_warning.md %}

После выполнения каждой инструкции из нижеследующего списка, возвращайтесь на эту страницу и переходите к следующему пункту. Если какие-то из действий вы уже выполняли, повторно их делать не нужно. 
{: .notice--warning}

## Подготовительные работы

1. Запустите приставку и **выберите светлую тему** в настройка Switch, а так же **переименуйте ваш аккаунт в "SysNAND"**
	* Это необходимо сделать для того, чтобы вы всегда могли визуально отличить EmuNAND от SysNAND.
	* Вы можете наоборот поставить тёмную тему в SYSNAND, а светлую в EmuNAND - это не имеет значения. Главное, чтобы вы могли отличить оба раздела визуально. 
1. Вставьте карту памяти в ПК и скопируйте всё её содержимое на ПК 
    * Следующий шаг уничтожит все данные на вашей карте памяти, поэтому перенесите их на ПК
    * Все установленные на карту памяти игры находятся в папке `Nintendo`
    * Все сохранения находятся во внутренней памяти приставки и **не** будут удалены, даже в том случае, если вы проигнорируете этот шаг
1. [Отформатируйте вашу карту памяти в FAT32](http://customfw.xyz/format_sd){:target="_blank"}
    * Да, именно в FAT32. Нет, проблем с играми больше 4Гб не будет
    * Делайте это даже в том случае, если ваша карта памяти не содержит данных
    * Делайте именно по этой инструкции
1. Убедитесь, что включили [отображение расширений файлов](https://customfw.xyz/file-extensions-windows){:target="_blank"}, если у вас Windows

## Создание EmuNAND 

1. Выключите консоль
1. Вставьте карту памяти в ПК и установите {% include abbr/kefir_addr.txt %}, если ещё не делали этого, после чего верните карту памяти в консоль
1. Включите консоль, удерживая кнопку повышения громкости, чтобы загрузиться в **hekate**
1. Перейдите в "**emuMMC**"
1. Нажмите "**Create emuMMC**" -> "**SD File**"
	* Для создания emuMMC нужно иметь не менее 32Гб свободного места на карте! Если у вас нет столько, возьмите другую карту, либо временно перенесите папку Nintendo на ваш ПК
1. После окончания создания emuMMC, нажмите "**ОК**"
	* Теперь при запуске приставки она автоматически будет запускать emuMMC. 
	* Чтобы попасть в официальную прошивку, запустите **hekate** -> "**Launch**" -> "**Stock**"

{% spoiler Уменьшение EmuNAND в программе NxNandManager, установка Incognito %}

В этой части рассказывается как уменьшить EmuNAND до 10Gb, а так же установить Incognito, чтобы обезопасить себя от бана. Часть полностью опциональная и её можно пропустить. ПО, используемое для действий, описанных ниже, доступно только для Windows. 

Прежде чем приступить к этому разделу, обязательно скопируйте папку `sxos/emunand` на ПК, если ещё не делали этого. В программе же выбирайте те файлы, что находятся у вас на карте памяти. Если после проделанных манипуляций что-то перестанет работать, вы всегда сможете просто вернуть обратно те файлы, что вы скопировали на ПК и получить работоспособный EmuNAND.
{: .notice--warning}

1. Выключите Switch и вставьте его карту памяти в ПК
1. Скопируйте на ПК папку `emuMMC/SD00/eMMC` (вместо `SD00` может быть другое название). **Далее мы будем работать именно с этой папкой!**
1. Скачайте и распакуйте на ваш ПК программу [NxNandManager](https://github.com/eliboa/NxNandManager/releases/latest){:target="_blank"}
1. Запустите программу [NxNandManager](https://github.com/eliboa/NxNandManager/releases/latest){:target="_blank"}
1. Перейдите в **File** -> **Open File** и выберите файл `emuMMC/SD00/eMMC/00` (вместо `SD00` может быть другое название) из папки, которую вы скопировали на свой ПК
1. Перейдите в **Options** -> **Configure keyset**, нажмите **Import keys from file** и выберите файл `switch/prod.keys`, расположенный на карте памяти вашей приставки 
1. Нажмите **Save** 
	* Если в поле **Device ID** написано **BAD CRYPTO**, то вы выбрали ключи не от своей приставки! Сделайте дамп ключей заново!

### Уменьшение размера EmuNAND 

1. Перейдите в **Options** -> **Resize NAND (RAWNAND, FULLNAND)**
	* Если вам не нужны сохранения в EmuNAND, поставьте галочку напротив **Format USER (all data in partition will be lost)**
1. В поле **New size for USER** укажите тот размер в мегабайтах, который будет доступен в качестве внутренней памяти консоли после уменьшения размера EmuNAND. Рекомендую указывать не менее 7548 Mb
		* Если на разделе много пользовательских данных, например, сейвов, то вы не сможете уменьшить EmuNAND меньше занятого объема. В таком случае нужно либо форматировать USER, либо уменьшать в доступных пределах
		* В поле **Total size for new file** будет указан итоговый размер файла EmuNAND после уменьшения размера
1. Нажмите **Save as...**, чтобы выбрать место сохранения EmuNAND
1. Нажмите **Save**, чтобы сохранить EmuNAND с выбранным размером 

### Установка Incognito 

Установив Incognito, вы уберёте личную информацию, необходимую для авторизации консоли на серверах Nintendo, из памяти вашей приставки, тем самым вы сможете выходить на консоли в интернет наверняка зная, что это не приведёт к бану.
{: .notice--info}

1. Перейдите в **File** -> **Open File** и выберите файл `RAWNAND.resized` - ваш уменьшенный EmuNAND, сохранённый в прошлом пункте
1. Перейдите в **Options** -> **Incognito (PRODINFO)**
1. Нажмите **Yes**, нажмите **OK**

Теперь в `RAWNAND.resized` установлен Incognito

### Разбиение EmuNAND на части менее 4х Гб

1. Скачайте [File Splitter](https://sourceforge.net/projects/fsplit/files/latest/download){:target="_blank"} и распакуйте программу в удобное место 
1. Запустите программу и в поле `File` укажите путь к сохраненному ранее обрезанному EmuNAND (`RAWNAND.resized`)
1. В поле **Split Size** выставьте **3.9 Gigibytes** и нажмите **Start** для начала разбиения
1. По окончанию процесса в папке программы появятся файлы вида `RAWNAND_X(Y).resized`, где **X** - порядковый номер файлов, а **Y** - общее количество файлов. 
1. Переименуйте файлы в `00`, `01`, `02` и т. п., внимательно соблюдая очерёдность. 
1. Перейдите в папку `emuMMC/SD00/eMMC/00` (вместо `SD00` может быть другое название) на карте памяти свитча и удалите все файлы вида `00`, `01`, `02` и т. п.
1. Переместите все файлы вида `00`, `01`, `02` и т. п. из папки с программой **File Splitter** в папку `emuMMC/SD00/eMMC/00` (вместо `SD00` может быть другое название)
1. Вставьте карту памяти обратно в приставку и включите Switch
1. После того, как приставка загрузится, перейдите в **Системные настройки** -> **Система**. В строке ниже **Обновления системы** будет написана версия вашего системного ПО, версия Atmosphere и буква **S** или **E**, где **S** будет означать *SysNAND*, а **E** - *EmuNAND*. *Вы должны находиться в EmuNAND*.

    ![](/images/screenshots/atmo_emu.png)
    {: .text-center}
    {: .notice--info}

1. Запустите **DBI** через **Альбомы** и обратите внимание на размер **NAND**, он должен совпадать с тем, который вы указали в NxNandManager
	* Нужно смотреть не на количество свободного места, а на общее количество места

{% endspoiler %}


### Запуск прошивки

{% spoiler Запуск EmuNAND %}

По-умолчанию кефир настроен таким образом, что при пробросе `payload.bin` из состава {% include abbr/kefir_addr.txt %}, Atmosphere будет загружать EmuNAND, если он есть и активирован. Если его нет, либо он не активирован, будет загружаться SysNAND со всеми патчами. 

Если же вы находитесь в {% include abbr/hekate.txt abbr="hekate" %}, то просто перейдите в "**Launch**" -> "**Atmosphere**"

{% endspoiler %}

{% spoiler Работа со стоковой прошивки %}

### Запуск стока

{% include inc/sysnand_warning.md %}

{% include inc/launch-hekate.txt %}
1. Перейдите в "**Launch**"
1. Запустите "**Stock**" для запуска {% include abbr/sysnand.txt abbr="SysNAND" %}

### Запуск EmuNAND из стока

1. Выключите приставку 
{% include inc/launch-cfw.txt %}

{% endspoiler %}

___

### Важно знать
* Действия которые вы выполняете в EmuNAND не влияют на состояние SysNAND и наоборот
* Если вы переносили в EmuNAND SysNAND, в котором уже были установлены игры, то в EmuNAND они работать не будут, до тех пор, пока вы не переместите папку `Nintendo` в папку `emuMMC`
* Форматирование (восстановление до заводских) SysNAND не влияет на EmuNAND и наоборот
* Если вы используете [{% include abbr/fusegele.txt abbr="Fusée Gelée" %}](fusee-gelee){:target="_blank"} для взлома, то вы можете обновить SysNAND, а не создавать для игры в лицензию отдельный emuMMC-раздел, до последней прошивки и использовать его для игры в лицензию, в том числе и онлайн. Это безопасно!
* **НИКОГДА не обновляйте SysNAND, если вы используете [Caffeine](caffeine){:target="_blank"}** для запуска прошивки! Обновив SysNAND вы не сможете запустить взлом! В дальнейшем мы установим защиту на SysNAND, чтобы избежать случайного обновления! 

___

[Закрыть страницу](javascript:window.close();)
{: .notice--success}