---
permalink: /caffeine.html
title: Запуск пейлоадера через Caffeine
author_profile: true
---

Эксплойт, который используется для взлома методом Caffeine, называется Deja-Vu. Он совместим с любой приставкой любой ревизии, на которой установлена прошивка версии 4.0.0 - 4.1.0, коих не то, чтобы много. Если ваша приставка из таких, то вам крупно повезло :)

Важно понимать, что у этого метода взлома есть свои ограничения и важные правила, которые нужно соблюдать. 

Избегайте использовать любые приложения, которые взаимодействуют с системным разделом напрямую, разве только вы не используете их в процессе выполнения гайда. Опасным считаются так же те приложения, которые позволяют манипулировать режимом [AutoRCM](autorcm){:target="_blank"}. **Если на такой приставке активировать AutoRCM, то фактически вы получите брик.**

Единственный способ восстановить брик на такой приставке - это физически залить бекап в NAND вашей приставки, что проще всего сделать с помощью второго свитча, имеющего доступ к hekate

Так же важно не допускать при подготовке к установке Caffeine подключения к интернету, поскольку подключившись к нему даже на секунду, приставка узнает что для неё есть обновление и не позволит воспользоваться вам точкой входа - браузером, без обновления системы. Состояние, когда приставка знает что есть обновление и не даёт воспользоваться без него браузером называется **supernag**. В данный момент нет ни одного способа вывести консоль из такого состояния. Это состояние не лечится даже сбросом к заводским настройкам. Говоря по простому, вы не сможете прошить приставку, введённую в supernag.

В ходе этого руководства мы специальным образом настроем точку доступа на нашей приставке таким образом, чтобы мы смогли воспользоваться на ней интернетом для запуска взлома, но не получили supernag.	

Мы рассматриваем случай, когда ваша приставка не прошиваемая, но версия её системного - {% include vars/caffeine_fw.txt %}. В ином случае, используйте [Fusée Gelée](fusee-gelee){:target="_bank"} для прошивки, поскольку он куда безопаснее
{: .notice--warning}

### Работа с Caffeine 

{% spoiler Часть I - Установка и настройка Caffeine %}

#### I - Установка Caffeine на карту памяти 

1. Убедитесь, что ваша карта памяти в формате FAT32. Если это не так - [отформатируйте](https://format.customfw.xyz){:target="_blank"} её
1. Установите свежую версию {% include abbr/kefir_addr.txt %}, если ещё не делали этого. 
	* При установке через скрипт, перейдите в **опции** и выберите **Caffeine**
		* Для того, чтобы попасть в опции кефира, внимательно следуйте инструкции на первом экране установщика 
	* При ручной установке {% include abbr/kefir_addr.txt %} распакуйте содержимое папки [caffeine.zip](files/caffeine.zip){:target="_blank"} в корень карты памяти с установленным кефиром с заменой (**объединить** на macOS)
1. Вставьте карту памяти в приставку 
1. Запустите приставку

#### II - Настройка интернета для использования Caffeine 

{% include inc/dns.txt dns1="51.15.245.41" dns2=', в поле "**Вторичный DNS**" введите `163.172.141.219`' %}
1. Для подключения потребуется регистрация, нажмите "**Далее**"
	* Если подключение проходит без запроса регистрации **НЕМЕДЛЕННО отключите интернет на приставке и удалите точку доступа**! Вероятнее всего ваш роутре игнорирует настройки DNS на приставке или перезаписывает их своими. В таком случае я рекомендую подключаться, раздавая интернет через телефон, либо настроить DNS на самом роутере. Как это сделать я не скажу, потому что для каждого роутера настройки будут разные.
	* Если вместо входа в браузер вы получаете сообщение о том, что есть новое обновление системного ПО, попробуйте выключить приставку и включить, удерживая обе кнопки громкости, пока не попадёте в меню восстановления. Попав в меню, удерживайте кнопку (POWER) 30 секунд, затем снова включите приставку и попробуйте снова зайти в настройки приставки и провести тест подключения, после чего перейти к регистрации в сети
		* Если после этих манипуляций вы всё равно получаете сообщение о том, что есть обновление системного ПО, то у вас supernag! В данный момент такую приставку прошить не выйдет. Убрать supernag в данный момент **невозможно**
			* Обращаю дополнительное внимание, наличие supernag подтверждается только после того, как вы перешли к регистрации в сети. Если подключение у вас проходит без регистрации к сети, то у вас проблемы с DNS. Решите их, после чего пробуйте, предварительно удалив сообщение о прошивке через меню восстановления. 
1. Откроется окно браузера, в котором будет загружена страница PegaSwitch. Дождитесь её полной загрузки

#### III - Запуск кастомной прошивки 

1. На странице PegaSwitch выберите правую иконку - **Caffeine**
	* Спиннер на экране зависнет, однако тот, что в левом нижнем углу, будет вращаться. Наберитесь терпения! В среднем от момента нажатия на иконку,  до срабатывания эксплойта проходит около 45 секунд
	* Если спиннер висит больше минуты, перезагрузите приставку, удерживая кнопку питания 30 секунд, и повторите попытку. Это же нужно сделать, если экран вдруг станет белым. 
1. Дождитесь появления текстового поля 
1. Нажмите на текстовое поле и сосчитайте до пяти
1. Нажмите кнопку питания
1. Если все сделано правильно, приставка перезагрузится в кастомную прошивку

#### IV - Установка FakeNews

1. Перейдите в Альбомы ![](/images/screenshots/album.png), удерживая кнопку (R), чтобы запустить [Homebrew Launcher](hbl){:target="_blank"}
1. Запустите “**Fake News Injector**”
1. Подождите пару секунд и нажмите (+) на правом джойконе, чтобы перезагрузить приставку 

{% endspoiler %}

{% spoiler Часть II - Настройка точки доступа для запуска Caffeine %}

Эту настройку нужно выполнять каждый раз, когда вы меняете или добавляете точку доступа к себе на консоль. То есть, для запуска эксплойта у активной точки доступа должен быть прописано указанный ниже DNS
{: .notice--info}

### Настройка FakeNews

{% include inc/dns.txt dns1="163.172.181.170" %}
1. Подключение должно пройти нормально, без регистрации в сети
1. Нажмите (HOME)

Сейчас ваша приставка уже находится в кастомной прошивке. Если вам нужно попасть в {% include abbr/hekate.txt abbr="hekate" %}, перезагрузите приставку через меню питания и зажмите кнопку понижения громкости на сплешскрине кефира. 
{: .notice--info}

Если вы выключили приставку, либо у вас села батарея, запускайте кастом по инструкции из спойлера **Запуск настроенного Caffeine**
{: .notice--warning}

{% endspoiler %}

____

 
{% spoiler Запуск настроенного Caffeine %}
#### I - Запуск PegaScape

1. Нажмите на иконку Новости ![](/images/screenshots/news.png) 
1. Выберите тайл "**Launch PegaSwitch**"
1. Нажмите на видео с логотипом "**ReSwitched**" для запуска PegaScape

#### II - Запуск hekate с помощью Caffeine

1. На странице PegaScape выберите иконку **Caffeine**
	* Спиннер на экране зависнет, однако тот, что в левом нижнем углу, будет вращаться. Наберитесь терпения! В среднем от момента нажатия на иконку,  до срабатывания эксплойта проходит около 45 секунд
	* Если спиннер висит больше минуты, перезагрузите приставку, удерживая кнопку питания 30 секунд, и повторите попытку. Это же нужно сделать, если экран вдруг станет белым. 
1. Дождитесь появления текстового поля 
1. Нажмите на текстовое поле и сосчитайте до пяти
1. Нажмите кнопку питания
1. Если все сделано правильно, приставка перезагрузится в кастомную прошивку

Сейчас ваша приставка уже находится в кастомной прошивке. Если вам нужно попасть в {% include abbr/hekate.txt abbr="hekate" %}, перезагрузите приставку через меню питания и зажмите кнопку понижения громкости на сплешскрине кефира.
{: .notice--info}

* Если вы выключили приставку, либо у вас села батарея, запускайте кастом по этой инструкции
* Если вы сменили точку доступа, то вам необходимо заново настроить DNS по инструкции **Настройка точки доступа для запуска Caffeine**

{% endspoiler %}

___

[Закрыть страницу](javascript:window.close();)
{: .notice--success}